<!-- SIMULATEUR PPPT - Code pour Webflow avec Auto-Update depuis GitHub -->
<!-- Collez ce code dans un élément "Embed" dans Webflow -->

<style>
.pppt-iframe-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0;
}

.pppt-iframe-wrapper {
    position: relative;
    width: 100%;
    border-radius: 24px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    overflow: visible;
}

.pppt-iframe-wrapper iframe {
    width: 100%;
    min-height: 1200px;
    border: none;
    border-radius: 24px;
    display: block;
    overflow: hidden;
}

/* Loader pendant le chargement */
.pppt-loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 1;
}

.pppt-loader-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f4f6;
    border-top: 4px solid #667eea;
    border-radius: 50%;
    animation: pppt-spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes pppt-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.pppt-loader-text {
    color: #6b7280;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 0.875rem;
}

/* Responsive */
@media (max-width: 768px) {
    .pppt-iframe-wrapper iframe {
        min-height: 1600px;
    }
}
</style>

<div class="pppt-iframe-container">
    <div class="pppt-iframe-wrapper">
        <!-- Loader -->
        <div class="pppt-loader" id="pppt-loader">
            <div class="pppt-loader-spinner"></div>
            <div class="pppt-loader-text">Chargement du simulateur...</div>
        </div>

        <!-- Iframe vers GitHub Pages - SE MET À JOUR AUTOMATIQUEMENT -->
        <iframe
            id="pppt-iframe"
            src="https://silverreferencement.github.io/simulateur-pppt/"
            title="Simulateur PPPT"
            loading="lazy"
            scrolling="no"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            onload="resizeIframe()">
        </iframe>
    </div>
</div>

<script>
// Ajuster automatiquement la hauteur de l'iframe
function resizeIframe() {
    const iframe = document.getElementById('pppt-iframe');
    const loader = document.getElementById('pppt-loader');

    // Cacher le loader
    if (loader) {
        loader.style.display = 'none';
    }

    try {
        // Tenter d'obtenir la hauteur du contenu (fonctionne si même origine)
        const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
        const height = iframeDocument.documentElement.scrollHeight;
        iframe.style.height = height + 'px';
    } catch (e) {
        // Cross-origin : utiliser hauteur par défaut
        iframe.style.height = '1400px';
    }
}

// Redimensionner au chargement et lors des changements de taille
window.addEventListener('load', resizeIframe);
window.addEventListener('resize', function() {
    setTimeout(resizeIframe, 100);
});
</script>
